<script>
  $(document).ready(() => {
    const $NavP = $(".home-con .con1 .bar-con p");
    const $NavBar = $(".home-con .con1 .bar-con .bar");

    let timeLineWidth = 0;

    const currentTime = () => {
      timeLineWidth += 0.2;
      if (timeLineWidth > 100) {
        timeLineWidth = 100;
      }
      $NavBar.css({
        width: timeLineWidth + "%",
      });
    };

    const updateNavBar = (idx) => {
      timeLineWidth = 0;
      $NavP.eq(0).text(`0${idx + 1}`);
    };

    setInterval(currentTime, 10);

    new Swiper(".home-con > .con1 > .mySwiper", {
      loop: true,
      slidesPerView: 1,
      effect: "fade",
      autoplay: {
        delay: 5000,
      },
      navigation: {
        nextEl: ".home-con .con1 .next",
        prevEl: ".home-con .con1 .prev",
      },
      on: {
        slideChange: function () {
          updateNavBar(this.realIndex);
        },
      },
    });

    function updateNavigationButtons(swiper, con) {
      if (swiper.isBeginning) {
        $(`.home-con .${con} .prev`).addClass("disabled");
      } else {
        $(`.home-con .${con} .prev`).removeClass("disabled");
      }

      if (swiper.isEnd) {
        $(`.home-con .${con} .next`).addClass("disabled");
      } else {
        $(`.home-con .${con} .next`).removeClass("disabled");
      }
    }

    var swiper2 = new Swiper(".home-con > .con2 .mySwiper", {
      slidesPerView: 4,
      spaceBetween: 34,
      navigation: {
        nextEl: ".home-con .con2 .next",
        prevEl: ".home-con .con2 .prev",
      },
      on: {
        init: function () {
          updateNavigationButtons(this, "con2");
        },
        slideChange: function () {
          updateNavigationButtons(this, "con2");
        },
      },
    });

    var swiper3 = new Swiper(".home-con > .con3 .mySwiper", {
      slidesPerView: 3,
      spaceBetween: 34,
      navigation: {
        nextEl: ".home-con .con3 .next",
        prevEl: ".home-con .con3 .prev",
      },
      on: {
        init: function () {
          updateNavigationButtons(this, "con3");
        },
        slideChange: function () {
          updateNavigationButtons(this, "con3");
        },
      },
    });

    var swiper3 = new Swiper(".home-con > .con5 .mySwiper", {
      slidesPerView: 3,
      spaceBetween: 34,
      navigation: {
        nextEl: ".home-con .con5 .next",
        prevEl: ".home-con .con5 .prev",
      },
      on: {
        init: function () {
          updateNavigationButtons(this, "con5");
        },
        slideChange: function () {
          updateNavigationButtons(this, "con5");
        },
      },
    });
  });
</script>

<section class="home-con">
  <article class="con1">
    <div class="swiper mySwiper">
      <div class="swiper-wrapper">
        <div class="swiper-slide bg1">
          <div class="text-box">
            <p>렉스이노베이션의 첨단 정보통신 기술이 재생에너지의 스마트 그리드화를 이끌어 갑니다.</p>
            <p>지속가능한 에너지 공급과 환경보호를 동시에 실현하는 기업</p>
          </div>
        </div>
        <div class="swiper-slide bg2">
          <div class="text-box">
            <p>친환경 미래기술을 선도하는 REC’s INNOVATION</p>
            <p>
              끊임없는 연구개발로 쌓아온 고도화된 기술력으로<br />
              더 나은 미래를 위한 솔루션을 제공합니다.
            </p>
          </div>
        </div>
        <div class="swiper-slide bg3">
          <div class="text-box">
            <p>청정 에너지로 우리의 미래를 밝혀나가는 길, 재생에너지의 힘과 혁신을 렉스이노베이션이 만들어갑니다.</p>
            <p>친환경 에너지를 통해 지구 환경을 보호하고 인류의 행복을 추구하는 기업</p>
          </div>
        </div>
        <div class="swiper-slide bg4">
          <div class="text-box">
            <p>대한민국의 바다 환경을 이용한 육상양어장에 소수력발전소를 건설합니다</p>
            <p>친환경 소수력발전소 100기 건설로 에너지자립을 선도하는 기업</p>
          </div>
        </div>
        <div class="swiper-slide bg5">
          <div class="text-box">
            <p>녹색금융 플랫폼 렉스펀드가 기후위기로부터 대한민국의 탄소중립을앞당기겠습니다.</p>
            <p>블록체인 기술을 활용한 Fintech 전문기업</p>
          </div>
        </div>
      </div>

      <div class="nav-con">
        <div class="bar-con">
          <p>01</p>
          <div class="bar-box">
            <div class="bar"></div>
          </div>
          <p>05</p>
        </div>
        <div class="nav-box">
          <img class="prev" src="/src/assets/images/icons/ico_prev01.png" alt="" />
          <img class="next" src="/src/assets/images/icons/ico_next01.png" alt="" />
        </div>
      </div>
    </div>
  </article>

  <article>
    <h2>hi</h2>
  </article>
</section>
